<!DOCTYPE html>
<html>
    <head>
        <title>Collins Bowling</title>
        <script src="js/constants.js"></script>
        <script src="js/utils.js"></script>
        <script src="js/standings.js"></script>
        <script src="js/teamInfo.js"></script>
        <script src="js/players.js"></script>
        <script src="js/schedule.js"></script>
        <script src="js/recaps.js"></script>
        
        <style>
            * {
                color-scheme: light dark;
            }
            td, th, tr, select, option {
                padding: 2px 8px 2px 8px;
                font-family: 'Courier New', Courier, monospace;
                font-size: 12pt;
            }
            h1 {
                font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            }
        </style>
    </head>
    <body>
        <h1>Schedule</h1>
        <h2 id="date"></h2>
        <table id="data">
            <tr>
                <th>Lane</th>
                <th>Team</th>
                <th>Lane</th>
                <th>Team</th>
            </tr>
            
            <template id="schedule-row">
                <tr>
                    <td style="text-align: right;"></td>
                    <td><a target="_parent"></a></td>
                    <td style="text-align: right;"></td>
                    <td><a target="_parent"></a></td>
                </tr>
            </template>
        </table>
        
        <script>
            let scheduleData;
            
            Promise.all([
                new schedule().then(result => scheduleData = result),
                new teamInfo().then(result => teamData = result)
            ]).then(() => {
                document.getElementById("date").innerHTML = scheduleData.getCurrentSchedule().date;
                const template = document.querySelector("#schedule-row");
                
                scheduleData.getCurrentSchedule().matchups.forEach((matchup, lanePair) => {
                    let newRow = document.importNode(template.content, true);
                    let a = newRow.querySelectorAll("a");
                    a[0].href = `./team.html?teamName=${teamData.getTeamName(matchup[0])}`;
                    a[1].href = `./team.html?teamName=${teamData.getTeamName(matchup[1])}`;
                    
                    let td = newRow.querySelectorAll("td");
                    td[0].textContent = (lanePair * 2) + FIRST_LANE;
                    a[0].textContent = teamData.getTeamName(matchup[0]);
                    td[2].textContent = (lanePair * 2) + FIRST_LANE + 1;
                    a[1].textContent = teamData.getTeamName(matchup[1]);
                    
                    document.getElementById("data").appendChild(newRow);
                });
            });
        </script>
    </body>
</html>